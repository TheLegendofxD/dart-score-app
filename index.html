<!DOCTYPE html>
<html lang="en"> <!--data-bs-theme="dark"-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ Dart</title>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register('service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registered');
                    }).catch(function(err) {
                    console.log('ServiceWorker error: ', err);
                    });
            })
        }
    </script>
    <link rel="stylesheet" href="style/main.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script src="js/app.js" defer></script>
    <script src="js/darkmode.js" defer></script>   
</head>
<body style="overflow-x: hidden;" class="m-3">
    <section id="sect_setup">
        <!-- Game Setup -->
        <h2>ğŸ¯ Dart Spiel Setup</h2>
        <p>Die Spieleranzahl kann spÃ¤ter <i>nicht</i> mehr geÃ¤ndert werden</p>
        <div class="mb-3">
            <label for="player_names" class="form-label">Spieler (<span id="player_count">0</span>)</label>
            <div class="players" name="player_names" id="player_names"></div>
        </div>
        <button class="btn btn-success form-control mb-3" id="add_player_btn">+ Spieler hinzufÃ¼gen</button>
        <label for="player_order" class="form-label">Spielerreihenfolge:</label>
        <div class="mb-3">
            <select name="player_order" id="player_order" class="form-select">
                <option value="unchanged">Wie eintragen</option>
                <option value="random">ZufÃ¤llig</option>
            </select>
        </div>
        <label for="target_score" class="form-label">Spielvariante:</label>
        <div class="row mb-3">
            <div class="col">
                <select name="target_score" id="target_score" class="form-select">
                    <option value="301">301</option>
                    <option value="501">501</option>
                    <option value="custom">Benutzerdefiniert</option>
                </select>
            </div>
            <div class="col" style="display: none;" id="custom_target_score_input_col">
                <input class="form-control" type="number" name="custom_target_score_input" id="custom_target_score_input" min="101" max="1001" value="301">
            </div>
        </div>
        <button class="btn btn-primary form-control" id="start_btn">Starten</button>
    </section>
    <section id="sect_main" style="display: none;">
        <div class="row mb-3">
            <div class="col">
                <button class="btn btn-danger form-control" id="finish_btn">Spiel beenden</button>
            </div>
            <div class="col">
                <button class="btn btn-secondary form-control" id="rule_btn">Regeln</button>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col">
                <label for="sort_type" class="form-label">Sortierung:</label>
                <select name="sort_type" id="sort_type" class="form-select">
                    <option value="new_first">Neuste zuerst</option>
                    <option value="old_first">Ã„lteste zuerst</option>
                </select>
            </div>
            <div class="col">
                <label for="view_type" class="form-label">Punkteansicht:</label>
                <select name="view_type" id="view_type" class="form-select">
                    <option value="sub">Subtrahieren</option>
                    <option value="add">Addieren</option>
                </select>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table" id="game_table">
                <thead>
                    <tr id="game_table_head" class="sticky-top"></tr>
                </thead>
                <tbody id="game_table_body">
                    <tr>
                        <th scope="row" class="sticky-left">1</th><td>150 <small>(+20)</small></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="errorModalLabel">âŒ Fehler</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="errorModalBody">
                    Fehler
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃŸen</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="askNumberModal" tabindex="-1" aria-labelledby="askNumberModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="askNumberLabel">ğŸ¯ Punktzahl eintragen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <label for="askNumberInput" id="askNumberLabel">
                        Wie viele Punkte hat <span id="askNumberPlayerName"></span> in der <span id="askNumberRound">letzten</span>
                        Runde erreicht?
                    </label>
                    <input type="number" class="form-control" id="askNumberInput" name="askNumberInput" min="0" placeholder="0">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="askNumberOkBtn">Ok</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="winModal" tabindex="-1" aria-labelledby="winModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="winModalLabel">ğŸ† Gewonnen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="winModalBody">
                    <span id="winPlayerName"></span> hat gewonnen!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃŸen</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="finishGameModal" tabindex="-1" aria-labelledby="finishGameModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="finishGameModalLabel">ğŸ¯ Spiel beenden</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    MÃ¶chtest du dieses Spiel beenden?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="finishGameOkBtn">Spiel beenden</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="ruleModal" tabindex="-1" aria-labelledby="ruleModalLabel" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ruleModalLabel">ğŸ¯ Regeln</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Das <b>Wurfabstand</b> ist <b>237cm</b>,<br>
                    die <i>Mitte der Scheibe</i> sollte in einer <b>HÃ¶he</b> von <b>173cm</b> hÃ¤ngen.<br>
                    <br>

                    <a href="https://dartfriends.de/dart-regeln/" target="_blank" rel="noopener noreferrer">Hier</a> gibt es eine vollstÃ¤ndige ErklÃ¤rung der Regeln.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃŸen</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="continueModal" tabindex="-1" aria-labelledby="continueModalLabel" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="continueModalLabel">ğŸ¯ Spielstand gefunden!</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Es wurde ein vorheriger Spielstand gefunden.
                    Wollen sie die Runde fortsetzen?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Neues Spiel</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="continueOkBtn">Fortsetzen</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>